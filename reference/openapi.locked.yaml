openapi: 3.1.0
info:
  title: FaultMaven API
  description: AI-powered troubleshooting assistant for Engineers, SREs, and DevOps
    professionals
  version: 1.0.0
paths:
  /api/v1/data/{data_id}/analyze:
    post:
      tags:
      - data_ingestion
      - data_processing
      summary: Analyze Data
      description: "Analyze uploaded data with clean delegation\n\nArgs:\n    data_id:\
        \ Data identifier to analyze\n    analysis_request: Request containing session_id\
        \ and analysis parameters\n    data_service: Injected DataService\n\nReturns:\n\
        \    DataInsightsResponse with analysis results"
      operationId: analyze_data_api_v1_data__data_id__analyze_post
      parameters:
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              title: Analysis Request
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Analyze Data Api V1 Data  Data Id  Analyze Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/data/sessions/{session_id}:
    get:
      tags:
      - data_ingestion
      - data_processing
      summary: Get Session Data
      description: "Get all data for a session with clean delegation\n\nArgs:\n  \
        \  session_id: Session identifier\n    limit: Maximum number of results\n\
        \    offset: Pagination offset\n    data_service: Injected DataService\n\n\
        Returns:\n    List of UploadedData for the session"
      operationId: get_session_data_api_v1_data_sessions__session_id__get
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      - name: limit
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          default: 10
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          default: 0
          title: Offset
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Session Data Api V1 Data Sessions  Session Id  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/data/sessions/{session_id}/batch-process:
    post:
      tags:
      - data_ingestion
      - data_processing
      summary: Batch Process Session Data
      description: "Batch process data for a session\n\nArgs:\n    session_id: Session\
        \ identifier\n    batch_request: Request with data_ids to process\n    data_service:\
        \ Injected DataService\n\nReturns:\n    Batch processing job information"
      operationId: batch_process_session_data_api_v1_data_sessions__session_id__batch_process_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              title: Batch Request
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Batch Process Session Data Api V1 Data Sessions  Session
                  Id  Batch Process Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/data/health:
    get:
      tags:
      - data_ingestion
      - data_processing
      summary: Health Check
      description: "Health check endpoint with service delegation\n\nReturns:\n  \
        \  Service health status"
      operationId: health_check_api_v1_data_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/data/{data_id}:
    get:
      tags:
      - data_ingestion
      - data_processing
      summary: Get Data
      description: "Get data by ID\n\nArgs:\n    data_id: Data identifier\n    data_service:\
        \ Injected DataService\n\nReturns:\n    Data information"
      operationId: get_data_api_v1_data__data_id__get
      parameters:
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadedData'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - data_ingestion
      - data_processing
      summary: Delete Data
      description: "Delete uploaded data with clean delegation\n\nArgs:\n    data_id:\
        \ Data identifier to delete\n    session_id: Session identifier for access\
        \ control (query parameter)\n    data_service: Injected DataService\n\nReturns:\n\
        \    Success confirmation"
      operationId: delete_data_api_v1_data__data_id__delete
      parameters:
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      - name: session_id
        in: query
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/documents:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Upload Document
      description: "Upload a document to the knowledge base\n\nArgs:\n    file: Document\
        \ file to upload\n    title: Document title\n    document_type: Type of document\n\
        \    tags: Comma-separated tags\n    source_url: Source URL if applicable\n\
        \nReturns:\n    Upload job information"
      operationId: upload_document_api_v1_knowledge_documents_post
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_document_api_v1_knowledge_documents_post'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Upload Document Api V1 Knowledge Documents Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: List Documents
      description: "List knowledge base documents with optional filtering\n\nArgs:\n\
        \    document_type: Filter by document type\n    tags: Filter by tags (comma-separated)\n\
        \    limit: Maximum number of documents to return\n    offset: Number of documents\
        \ to skip\n\nReturns:\n    List of documents"
      operationId: list_documents_api_v1_knowledge_documents_get
      parameters:
      - name: document_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Document Type
      - name: tags
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response List Documents Api V1 Knowledge Documents Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/documents/{document_id}:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Document
      description: "Get a specific knowledge base document\n\nArgs:\n    document_id:\
        \ Document identifier\n\nReturns:\n    Document details"
      operationId: get_document_api_v1_knowledge_documents__document_id__get
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
          title: Document Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeBaseDocument'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Delete Document
      description: "Delete a knowledge base document\n\nArgs:\n    document_id: Document\
        \ identifier\n\nReturns:\n    Deletion confirmation"
      operationId: delete_document_api_v1_knowledge_documents__document_id__delete
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
          title: Document Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '204':
          description: Successful Response
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Update Document
      description: Update document metadata and content.
      operationId: update_document_api_v1_knowledge_documents__document_id__put
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
          title: Document Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              title: Update Data
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Update Document Api V1 Knowledge Documents  Document
                  Id  Put
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/jobs/{job_id}:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Job Status
      description: "Get the status of a knowledge base ingestion job\n\nArgs:\n  \
        \  job_id: Job identifier\n\nReturns:\n    Job status information"
      operationId: get_job_status_api_v1_knowledge_jobs__job_id__get
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: string
          title: Job Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Job Status Api V1 Knowledge Jobs  Job Id  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/search:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Search Documents
      description: "Search knowledge base documents\n\nArgs:\n    request: Search\
        \ request with query and filters\n\nReturns:\n    Search results"
      operationId: search_documents_api_v1_knowledge_search_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Search Documents Api V1 Knowledge Search Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/documents/bulk-update:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Bulk Update Documents
      description: Bulk update document metadata.
      operationId: bulk_update_documents_api_v1_knowledge_documents_bulk_update_post
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              title: Request
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Bulk Update Documents Api V1 Knowledge Documents Bulk
                  Update Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/documents/bulk-delete:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Bulk Delete Documents
      description: Bulk delete documents.
      operationId: bulk_delete_documents_api_v1_knowledge_documents_bulk_delete_post
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: array
                items:
                  type: string
              title: Request
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Bulk Delete Documents Api V1 Knowledge Documents Bulk
                  Delete Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/stats:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Knowledge Stats
      description: Get knowledge base statistics.
      operationId: get_knowledge_stats_api_v1_knowledge_stats_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Knowledge Stats Api V1 Knowledge Stats Get
  /api/v1/knowledge/analytics/search:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Search Analytics
      description: Get search analytics and insights.
      operationId: get_search_analytics_api_v1_knowledge_analytics_search_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Search Analytics Api V1 Knowledge Analytics Search
                  Get
  /api/v1/sessions:
    post:
      tags:
      - session_management
      - session_management
      summary: Create Session
      description: "Create or resume a troubleshooting session.\n\n**Session Creation\
        \ & Resumption:**\n- If `client_id` is provided and matches an active session,\
        \ that session is resumed\n- If `client_id` matches an expired session, returns\
        \ 404/410 error (frontend creates new session)\n- If `client_id` is new or\
        \ not provided, creates fresh session\n\n**Session Timeout:**\n- Sessions\
        \ automatically expire after `timeout_minutes` of inactivity\n- Default timeout:\
        \ 180 minutes (3 hours)\n- Min timeout: 60 minutes, Max timeout: 480 minutes\n\
        - Expired sessions cannot be resumed and return 404/410 errors\n\n**Frontend\
        \ Crash Recovery:**\n- Browser crashes: Session resumes if within timeout\
        \ window\n- Extended downtime: Session expires, new session created automatically\n\
        \nArgs:\n    request: Session creation parameters including optional client_id\
        \ and timeout\n    user_id: Optional user identifier (query param)\n\nReturns:\n\
        \    Session creation/resumption response with expiration information"
      operationId: create_session_api_v1_sessions_post
      parameters:
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
              - $ref: '#/components/schemas/SessionCreateRequest'
              - type: 'null'
              title: Request
      responses:
        '201':
          description: Session created or resumed successfully
          content:
            application/json:
              schema: {}
              examples:
                new_session:
                  summary: New session created
                  value:
                    session_id: 550e8400-e29b-41d4-a716-446655440000
                    user_id: user_123
                    client_id: browser-client-abc123
                    created_at: '2025-01-15T10:00:00Z'
                    expires_at: '2025-01-15T13:00:00Z'
                    status: consulting
                    session_type: troubleshooting
                    session_resumed: false
                    timeout_minutes: 180
                    message: Session created successfully
                resumed_session:
                  summary: Existing session resumed
                  value:
                    session_id: 550e8400-e29b-41d4-a716-446655440000
                    user_id: user_123
                    client_id: browser-client-abc123
                    created_at: '2025-01-15T09:30:00Z'
                    expires_at: '2025-01-15T14:30:00Z'
                    status: consulting
                    session_type: troubleshooting
                    session_resumed: true
                    timeout_minutes: 300
                    message: Session resumed successfully
        '404':
          description: Session expired or not found (when resuming with client_id)
          content:
            application/json:
              examples:
                session_expired:
                  summary: Session expired
                  value:
                    detail: Session expired after 180 minutes of inactivity
        '410':
          description: Session gone (alternative to 404 for expired sessions)
          content:
            application/json:
              examples:
                session_gone:
                  summary: Session no longer available
                  value:
                    detail: Session not found
        '422':
          description: Validation error (invalid timeout_minutes)
          content:
            application/json:
              examples:
                invalid_timeout:
                  summary: Invalid timeout value
                  value:
                    detail: timeout_minutes must be between 60 and 480 minutes
    get:
      tags:
      - session_management
      - session_management
      summary: List Sessions
      description: "List all sessions with optional filtering.\n\nArgs:\n    user_id:\
        \ Optional user ID filter\n    session_type: Optional session type filter\n\
        \    usage_type: Optional usage type filter (alias for session_type)\n   \
        \ limit: Maximum number of sessions to return\n    offset: Number of sessions\
        \ to skip\n\nReturns:\n    List of sessions"
      operationId: list_sessions_api_v1_sessions_get
      parameters:
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: session_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Type
      - name: usage_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Usage Type
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
          title: Offset
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}:
    get:
      tags:
      - session_management
      - session_management
      summary: Get Session
      description: "Retrieve a specific session by ID.\n\nArgs:\n    session_id: Session\
        \ identifier\n\nReturns:\n    Session details"
      operationId: get_session_api_v1_sessions__session_id__get
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - session_management
      - session_management
      summary: Delete Session
      description: "Delete a specific session.\n\nArgs:\n    session_id: Session identifier\n\
        \nReturns:\n    Deletion confirmation"
      operationId: delete_session_api_v1_sessions__session_id__delete
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '204':
          description: Successful Response
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/cases:
    get:
      tags:
      - session_management
      - session_management
      summary: List Session Cases
      description: "List all cases associated with a session.\n\nCRITICAL: Must return\
        \ 200 [] for empty results, NOT 404\n\nArgs:\n    session_id: Session identifier\n\
        \    limit: Maximum number of cases to return (1-100)\n    offset: Number\
        \ of cases to skip for pagination\n\nReturns:\n    List of cases (empty list\
        \ if no cases found)"
      operationId: list_session_cases_api_v1_sessions__session_id__cases_get
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
          title: Offset
      - name: include_empty
        in: query
        required: false
        schema:
          type: boolean
          description: Include cases with message_count == 0
          default: false
          title: Include Empty
        description: Include cases with message_count == 0
      - name: include_terminal
        in: query
        required: false
        schema:
          type: boolean
          description: Include terminal state cases (resolved/closed)
          default: false
          title: Include Terminal
        description: Include terminal state cases (resolved/closed)
      - name: include_deleted
        in: query
        required: false
        schema:
          type: boolean
          description: Include deleted cases (admin only)
          default: false
          title: Include Deleted
        description: Include deleted cases (admin only)
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/cleanup:
    post:
      tags:
      - session_management
      - session_management
      summary: Cleanup Expired Sessions
      description: "Clean up expired sessions (admin/testing endpoint).\n\nThis endpoint\
        \ triggers immediate cleanup of expired sessions.\nIn production, this runs\
        \ automatically every 30 minutes.\n\nReturns:\n    Number of sessions cleaned\
        \ up"
      operationId: cleanup_expired_sessions_api_v1_sessions_cleanup_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/sessions/{session_id}/heartbeat:
    post:
      tags:
      - session_management
      - session_management
      summary: Session Heartbeat
      description: "Update session activity timestamp (heartbeat).\n\nArgs:\n    session_id:\
        \ Session identifier\n\nReturns:\n    Heartbeat confirmation"
      operationId: session_heartbeat_api_v1_sessions__session_id__heartbeat_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/stats:
    get:
      tags:
      - session_management
      - session_management
      summary: Get Session Stats
      description: "Get session statistics and activity summary.\n\nArgs:\n    session_id:\
        \ Session identifier\n\nReturns:\n    Session statistics"
      operationId: get_session_stats_api_v1_sessions__session_id__stats_get
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/cleanup:
    post:
      tags:
      - session_management
      - session_management
      summary: Cleanup Session
      description: "Clean up session data and temporary files.\n\nArgs:\n    session_id:\
        \ Session identifier\n\nReturns:\n    Cleanup confirmation"
      operationId: cleanup_session_api_v1_sessions__session_id__cleanup_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/recovery-info:
    get:
      tags:
      - session_management
      - session_management
      summary: Get Session Recovery Info
      description: "Get session recovery information for restoring lost sessions.\n\
        \nArgs:\n    session_id: Session identifier\n\nReturns:\n    Recovery information"
      operationId: get_session_recovery_info_api_v1_sessions__session_id__recovery_info_get
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/restore:
    post:
      tags:
      - session_management
      - session_management
      summary: Restore Session
      description: "Restore a session from backup or recovery state.\n\nArgs:\n  \
        \  session_id: Session identifier\n    restore_request: Restoration parameters\n\
        \nReturns:\n    Restoration confirmation"
      operationId: restore_session_api_v1_sessions__session_id__restore_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SessionRestoreRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/auth/dev-login:
    post:
      tags:
      - authentication
      - authentication
      summary: Dev Login
      description: 'Development login endpoint


        Authenticates existing users and generates authentication tokens.

        This endpoint is designed for development environments and will be replaced

        with production OAuth2/OIDC integration later.


        **Flow:**

        1. Validate username format

        2. Find existing user (returns 401 if user doesn''t exist)

        3. Generate authentication token

        4. Return token with user profile


        **Security:**

        - Only authenticates existing users (no account creation)

        - Tokens expire after 24 hours

        - Input validation and sanitization

        - Proper OAuth2 error responses'
      operationId: dev_login_api_v1_auth_dev_login_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DevLoginRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthTokenResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/auth/dev-register:
    post:
      tags:
      - authentication
      - authentication
      summary: Dev Register
      description: 'Development registration endpoint


        Creates a new user account and generates an authentication token.

        This endpoint is designed for development environments and will be replaced

        with production registration flows later.


        **Flow:**

        1. Validate username format

        2. Check if user already exists (returns 409 if exists)

        3. Create new user account

        4. Generate authentication token

        5. Return token with user profile


        **Security:**

        - Prevents duplicate account creation

        - Tokens expire after 24 hours

        - Input validation and sanitization

        - Auto-generates email and display name if not provided'
      operationId: dev_register_api_v1_auth_dev_register_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DevLoginRequest'
        required: true
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthTokenResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/auth/logout:
    post:
      tags:
      - authentication
      - authentication
      summary: Logout
      description: 'Logout current user


        Revokes the current authentication token. The user will need to login

        again to access protected resources.


        **Flow:**

        1. Validate current authentication

        2. Revoke the current token

        3. Return confirmation'
      operationId: logout_api_v1_auth_logout_post
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogoutResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/auth/me:
    get:
      tags:
      - authentication
      - authentication
      summary: Get Current User Profile
      description: 'Get current user profile


        Returns detailed information about the currently authenticated user,

        including profile data and token statistics.'
      operationId: get_current_user_profile_api_v1_auth_me_get
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfoResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/auth/health:
    get:
      tags:
      - authentication
      - authentication
      summary: Auth Health Check
      description: 'Authentication system health check


        Returns the status of authentication services including token management

        and user storage systems.'
      operationId: auth_health_check_api_v1_auth_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/auth/dev/revoke-all-tokens:
    post:
      tags:
      - authentication
      - authentication
      summary: Dev Revoke All User Tokens
      description: 'Development endpoint: Revoke all tokens for current user


        **WARNING:** This endpoint is for development use only.

        It will be removed in production builds.'
      operationId: dev_revoke_all_user_tokens_api_v1_auth_dev_revoke_all_tokens_post
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogoutResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}:
    delete:
      tags:
      - case_persistence
      - cases
      summary: Delete Case
      description: "Permanently delete a case and all associated data.\n\nThis endpoint\
        \ provides hard delete functionality. Once deleted, \nthe case and all associated\
        \ data are permanently removed.\n\nThe operation is idempotent - subsequent\
        \ requests will return \n204 No Content even if the case has already been\
        \ deleted.\n\nReturns 204 No Content on success."
      operationId: delete_case_api_v1_cases__case_id__delete
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '204':
          description: Case deleted successfully
          headers:
            X-Correlation-ID:
              description: Request correlation ID
              schema:
                type: string
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case
      description: 'Get a specific case by ID (v2.0 milestone-based)


        Returns full case details with milestone progress, investigation stage,

        and completion percentage.'
      operationId: get_case_api_v1_cases__case_id__get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseDetail'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - case_persistence
      - cases
      summary: Update Case
      description: 'Update case details


        Updates case metadata such as title, description, status, priority, and tags.

        Requires edit permissions on the case.'
      operationId: update_case_api_v1_cases__case_id__put
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaseUpdateRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases:
    post:
      tags:
      - case_persistence
      - cases
      summary: Create Case
      description: 'Create a new troubleshooting case (v2.0 milestone-based)


        Creates a new case with milestone-based investigation tracking.

        Initial status is CONSULTING (problem definition phase).


        Returns CaseSummary with basic case info and milestone progress.'
      operationId: create_case_api_v1_cases_post
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaseCreateRequest'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseSummary'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - case_persistence
      - cases
      summary: List Cases
      description: 'List user''s cases with pagination (v2.0 milestone-based)


        Returns CaseListResponse with:

        - List of CaseSummary objects (with milestone progress)

        - Total count for pagination

        - has_more flag


        Default Filtering Behavior:

        - INCLUDES empty cases (current_turn == 0) - newly created cases are visible

        - EXCLUDES archived/closed cases unless include_archived=true

        - Use include_empty=false to hide cases with no conversation yet

        - Use status filter to further refine results'
      operationId: list_cases_api_v1_cases_get
      parameters:
      - name: status
        in: query
        required: false
        schema:
          anyOf:
          - $ref: '#/components/schemas/CaseStatus-Input'
          - type: 'null'
          description: Filter by status
          title: Status
        description: Filter by status
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          description: Items per page
          default: 50
          title: Limit
        description: Items per page
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Number of items to skip
          default: 0
          title: Offset
        description: Number of items to skip
      - name: include_empty
        in: query
        required: false
        schema:
          type: boolean
          description: Include cases with current_turn == 0 (newly created)
          default: true
          title: Include Empty
        description: Include cases with current_turn == 0 (newly created)
      - name: include_archived
        in: query
        required: false
        schema:
          type: boolean
          description: Include archived/closed cases
          default: false
          title: Include Archived
        description: Include archived/closed cases
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseListResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/ui:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Ui
      description: 'Get phase-adaptive UI-optimized case response.


        Returns different response schemas based on case status:

        - CONSULTING: Focus on problem understanding, clarifying questions

        - INVESTIGATING: Milestone progress, hypotheses, evidence, working conclusion

        - RESOLVED: Root cause, solution, verification, resolution summary


        This endpoint eliminates multiple API calls by returning all UI state

        in a single response optimized for the current investigation phase.'
      operationId: get_case_ui_api_v1_cases__case_id__ui_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/CaseUIResponse_Consulting'
                - $ref: '#/components/schemas/CaseUIResponse_Investigating'
                - $ref: '#/components/schemas/CaseUIResponse_Resolved'
                discriminator:
                  propertyName: status
                  mapping:
                    consulting: '#/components/schemas/CaseUIResponse_Consulting'
                    investigating: '#/components/schemas/CaseUIResponse_Investigating'
                    resolved: '#/components/schemas/CaseUIResponse_Resolved'
                title: Response Get Case Ui Api V1 Cases  Case Id  Ui Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/title:
    post:
      tags:
      - case_persistence
      - cases
      summary: Generate Case Title
      description: "Generate a concise, case-specific title from case messages and\
        \ metadata.\n\n**Request body (optional):**\n- `max_words`: integer (3â€“12,\
        \ default 8) - Maximum words in generated title\n- `hint`: string - Optional\
        \ hint to guide title generation\n- `force`: boolean (default false) - Only\
        \ overwrite non-default titles when true\n\n**Returns:**\n- 200: TitleResponse\
        \ with X-Correlation-ID header\n- 422: ErrorResponse with code INSUFFICIENT_CONTEXT\
        \ and X-Correlation-ID header\n\n**Description:** Returns 422 when insufficient\
        \ meaningful context; clients SHOULD keep \nexisting title unchanged and may\
        \ retry later."
      operationId: generate_case_title_api_v1_cases__case_id__title_post
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: force
        in: query
        required: false
        schema:
          type: boolean
          description: Only overwrite non-default titles when true
          default: false
          title: Force
        description: Only overwrite non-default titles when true
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
              - type: object
              - type: 'null'
              description: Optional request parameters
              title: Request Body
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TitleResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/search:
    post:
      tags:
      - case_persistence
      - cases
      summary: Search Cases
      description: 'Search cases by content


        Searches case titles, descriptions, and optionally message content

        for the specified query terms.'
      operationId: search_cases_api_v1_cases_search_post
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaseSearchRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CaseSummary'
                title: Response Search Cases Api V1 Cases Search Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/analytics:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Analytics
      description: 'Get case analytics and metrics


        Returns analytics data including message counts, participant activity,

        resolution time, and other case metrics.'
      operationId: get_case_analytics_api_v1_cases__case_id__analytics_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Case Analytics Api V1 Cases  Case Id  Analytics
                  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/messages:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Messages Enhanced
      description: 'Retrieve conversation messages for a case with enhanced debugging
        info.

        Supports pagination and includes metadata about message retrieval status.'
      operationId: get_case_messages_enhanced_api_v1_cases__case_id__messages_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          description: Maximum number of messages to return
          default: 50
          title: Limit
        description: Maximum number of messages to return
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Offset for pagination
          default: 0
          title: Offset
        description: Offset for pagination
      - name: include_debug
        in: query
        required: false
        schema:
          type: boolean
          description: Include debug information for troubleshooting
          default: false
          title: Include Debug
        description: Include debug information for troubleshooting
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseMessagesResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/sessions/{session_id}/case:
    post:
      tags:
      - case_persistence
      - cases
      summary: Create Case For Session
      description: 'Create or get case for a session


        Associates a case with the given session. If no case exists, creates a new
        one.

        If force_new is true, always creates a new case.


        **Title Auto-Generation**: If title is not provided or empty, the backend

        automatically generates a unique title in the format: Case-MMDD-N

        (e.g., Case-1028-1, Case-1028-2). The sequence counter resets daily.


        Supports idempotency via ''idempotency-key'' header to prevent duplicate case

        creation on retry when using force_new=true.'
      operationId: create_case_for_session_api_v1_cases_sessions__session_id__case_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      - name: title
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Case title (optional, auto-generated if not provided)
          title: Title
        description: Case title (optional, auto-generated if not provided)
      - name: force_new
        in: query
        required: false
        schema:
          type: boolean
          description: Force creation of new case
          default: false
          title: Force New
        description: Force creation of new case
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Create Case For Session Api V1 Cases Sessions  Session
                  Id  Case Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/sessions/{session_id}/resume/{case_id}:
    post:
      tags:
      - case_persistence
      - cases
      summary: Resume Case In Session
      description: 'Resume an existing case in a session


        Links the session to an existing case, allowing the user to continue

        a previous troubleshooting conversation.'
      operationId: resume_case_in_session_api_v1_cases_sessions__session_id__resume__case_id__post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Resume Case In Session Api V1 Cases Sessions  Session
                  Id  Resume  Case Id  Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/queries:
    post:
      tags:
      - case_persistence
      - cases
      summary: Submit Case Query
      description: 'Submit user message to advance the investigation (milestone-based).


        Processes the message through MilestoneEngine and returns investigation progress.

        Each turn represents one user message and the agent''s response.


        Production features:

        - Session validation

        - Idempotency key support

        - Query history tracking

        - Correlation ID tracking

        - Comprehensive error handling'
      operationId: submit_case_query_api_v1_cases__case_id__queries_post
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaseQueryRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseQueryResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - case_persistence
      - cases
      summary: List Case Queries
      description: 'List queries for a specific case with pagination.


        CRITICAL: Must return 200 [] for empty results, NOT 404'
      operationId: list_case_queries_api_v1_cases__case_id__queries_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
          title: Offset
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/health:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Service Health
      description: 'Get case service health status


        Returns health information about the case persistence system,

        including connectivity and performance metrics.'
      operationId: get_case_service_health_api_v1_cases_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Case Service Health Api V1 Cases Health Get
  /api/v1/cases/{case_id}/data:
    get:
      tags:
      - case_persistence
      - cases
      summary: List Case Data
      description: 'List data files associated with a case.


        Returns array of data records with pagination headers.

        Always returns 200 with empty array if no data exists.'
      operationId: list_case_data_api_v1_cases__case_id__data_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 200
          minimum: 1
          description: Maximum number of items to return
          default: 50
          title: Limit
        description: Maximum number of items to return
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Number of items to skip
          default: 0
          title: Offset
        description: Number of items to skip
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    post:
      tags:
      - case_persistence
      - cases
      summary: Upload Case Data
      description: "Upload data file to a specific case (case-scoped endpoint).\n\n\
        This endpoint follows the complete data submission pipeline:\n1. Data preprocessing\
        \ (extraction and sanitization)\n2. Evidence creation\n3. Hypothesis analysis\n\
        4. Agent response generation\n\nThe session_id is optional - if not provided,\
        \ it will be derived from the case.\n\nReturns:\n    DataUploadResponse with:\n\
        \    - file_id: Unique identifier for the uploaded file\n    - filename: Original\
        \ filename\n    - preprocessing metadata (data_type, extraction_method, etc.)\n\
        \    - agent_response: AI analysis of the uploaded data"
      operationId: upload_case_data_api_v1_cases__case_id__data_post
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_case_data_api_v1_cases__case_id__data_post'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataUploadResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/data/{data_id}:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Data
      description: Get specific data file details for a case.
      operationId: get_case_data_api_v1_cases__case_id__data__data_id__get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Case Data Api V1 Cases  Case Id  Data  Data Id  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - case_persistence
      - cases
      summary: Delete Case Data
      description: Remove data file from a case. Returns 204 No Content on success.
      operationId: delete_case_data_api_v1_cases__case_id__data__data_id__delete
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '204':
          description: Data deleted successfully
          headers:
            X-Correlation-ID:
              description: Request correlation ID
              schema:
                type: string
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/report-recommendations:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Report Recommendations
      description: "Get intelligent report recommendations for a resolved case.\n\n\
        Returns recommendations for which reports to generate, including\nintelligent\
        \ runbook suggestions based on similarity search of existing\nrunbooks (both\
        \ incident-driven and document-driven sources).\n\nRecommendation Logic:\n\
        - Always available: Incident Report, Post-Mortem (unique per incident)\n-\
        \ Conditional: Runbook (based on similarity search)\n    - â‰¥85% similarity:\
        \ Recommend reuse existing runbook\n    - 70-84% similarity: Offer both review\
        \ OR generate options\n    - <70% similarity: Recommend generate new runbook\n\
        \nArgs:\n    case_id: Case identifier\n    case_service: Injected case service\n\
        \    current_user: Authenticated user\n\nReturns:\n    ReportRecommendation\
        \ with available types and runbook suggestion\n\nRaises:\n    400: Case not\
        \ in resolved state\n    404: Case not found or access denied\n    500: Internal\
        \ server error"
      operationId: get_report_recommendations_api_v1_cases__case_id__report_recommendations_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/reports:
    post:
      tags:
      - case_persistence
      - cases
      summary: Generate Case Reports
      description: Generate case documentation reports.
      operationId: generate_case_reports_api_v1_cases__case_id__reports_post
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              title: Request Body
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Reports
      description: "Retrieve generated reports for a case.\n\nArgs:\n    case_id:\
        \ Case identifier\n    include_history: If True, return all report versions;\
        \ if False, only current\n\nReturns:\n    List of CaseReport objects"
      operationId: get_case_reports_api_v1_cases__case_id__reports_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: include_history
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Include History
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/reports/{report_id}/download:
    get:
      tags:
      - case_persistence
      - cases
      summary: Download Case Report
      description: "Download case report in specified format.\n\nArgs:\n    case_id:\
        \ Case identifier\n    report_id: Report identifier\n    format: Output format\
        \ (markdown or pdf) - currently only markdown supported\n\nReturns:\n    File\
        \ response with report content"
      operationId: download_case_report_api_v1_cases__case_id__reports__report_id__download_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: report_id
        in: path
        required: true
        schema:
          type: string
          title: Report Id
      - name: format
        in: query
        required: false
        schema:
          type: string
          default: markdown
          title: Format
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/close:
    post:
      tags:
      - case_persistence
      - cases
      summary: Close Case
      description: "Close case and archive with reports.\n\nMarks all latest reports\
        \ as linked to case closure and transitions\ncase to CLOSED state.\n\nReturns:\n\
        \    CaseClosureResponse with list of archived reports"
      operationId: close_case_api_v1_cases__case_id__close_post
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
              - type: object
              - type: 'null'
              title: Request Body
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/uploaded-files:
    get:
      tags:
      - case_persistence
      - cases
      summary: List uploaded files with evidence counts
      description: Get all uploaded files for a case with metadata and evidence linkage
        counts.
      operationId: list_uploaded_files_api_v1_cases__case_id__uploaded_files_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          description: Case ID
          title: Case Id
        description: Case ID
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadedFilesListResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/uploaded-files/{file_id}:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get uploaded file details with derived evidence
      description: Retrieve detailed information about an uploaded file including
        all evidence derived from it and hypothesis linkage.
      operationId: get_uploaded_file_details_api_v1_cases__case_id__uploaded_files__file_id__get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          description: Case ID
          title: Case Id
        description: Case ID
      - name: file_id
        in: path
        required: true
        schema:
          type: string
          description: File ID
          title: File Id
        description: File ID
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadedFileDetailsResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/evidence/{evidence_id}:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get evidence details with source file
      description: Retrieve detailed evidence information including source file reference
        and hypothesis linkage.
      operationId: get_evidence_details_api_v1_cases__case_id__evidence__evidence_id__get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          description: Case ID
          title: Case Id
        description: Case ID
      - name: evidence_id
        in: path
        required: true
        schema:
          type: string
          description: Evidence ID
          title: Evidence Id
        description: Evidence ID
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EvidenceDetailsResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/users/{user_id}/kb/documents:
    post:
      tags:
      - user_kb
      - user_kb
      summary: Upload User Kb Document
      description: "Upload a document to user's personal knowledge base.\n\nAccepts\
        \ runbooks, procedures, troubleshooting guides, and documentation.\nDocuments\
        \ are preprocessed to extract key information and stored permanently\nin the\
        \ user's knowledge base for future agent queries.\n\n**Access Control**: Users\
        \ can only upload to their own knowledge base.\n\n**File Types Supported**:\n\
        - Text files (.txt, .md)\n- Logs (.log)\n- Configuration files (.yaml, .json,\
        \ .xml, .conf)\n- Code files (.py, .js, .java, etc.)\n\n**Processing**:\n\
        1. File uploaded and validated\n2. Content preprocessed (classification, extraction,\
        \ sanitization)\n3. Document stored in user-scoped ChromaDB collection\n4.\
        \ Available immediately for agent queries via answer_from_user_kb tool\n\n\
        **Example**:\n```bash\ncurl -X POST \"http://localhost:8000/api/v1/users/alice/kb/documents\"\
        \ \\\n  -H \"Authorization: Bearer dev_token\" \\\n  -F \"file=@database_runbook.md\"\
        \ \\\n  -F \"title=Database Timeout Troubleshooting\" \\\n  -F \"category=database\"\
        \ \\\n  -F \"tags=postgresql,timeout,performance\"\n```"
      operationId: upload_user_kb_document_api_v1_users__user_id__kb_documents_post
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          title: User Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_user_kb_document_api_v1_users__user_id__kb_documents_post'
      responses:
        '201':
          description: Document uploaded successfully
          content:
            application/json:
              schema: {}
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Forbidden
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Service Unavailable
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - user_kb
      - user_kb
      summary: List User Kb Documents
      description: "List all documents in user's knowledge base.\n\nReturns metadata\
        \ for all documents in the user's KB, with optional filtering\nby category\
        \ and pagination support.\n\n**Access Control**: Users can only list their\
        \ own documents.\n\n**Query Parameters**:\n- `limit`: Maximum number of documents\
        \ to return (default: all)\n- `offset`: Number of documents to skip for pagination\
        \ (default: 0)\n- `category`: Filter by document category (optional)\n\n**Example**:\n\
        ```bash\n# List all documents\ncurl \"http://localhost:8000/api/v1/users/alice/kb/documents\"\
        \ \\\n  -H \"Authorization: Bearer dev_token\"\n\n# List database runbooks\
        \ only\ncurl \"http://localhost:8000/api/v1/users/alice/kb/documents?category=database\"\
        \ \\\n  -H \"Authorization: Bearer dev_token\"\n\n# Paginate (10 documents\
        \ at a time)\ncurl \"http://localhost:8000/api/v1/users/alice/kb/documents?limit=10&offset=0\"\
        \ \\\n  -H \"Authorization: Bearer dev_token\"\n```"
      operationId: list_user_kb_documents_api_v1_users__user_id__kb_documents_get
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          title: User Id
      - name: limit
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          description: Maximum documents to return
          title: Limit
        description: Maximum documents to return
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          description: Number of documents to skip
          default: 0
          title: Offset
        description: Number of documents to skip
      - name: category
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter by category
          title: Category
        description: Filter by category
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: List of user's KB documents
          content:
            application/json:
              schema: {}
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Forbidden
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Service Unavailable
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/users/{user_id}/kb/documents/{doc_id}:
    delete:
      tags:
      - user_kb
      - user_kb
      summary: Delete User Kb Document
      description: "Delete a specific document from user's knowledge base.\n\nPermanently\
        \ removes the document from the user's KB. This action cannot be undone.\n\
        \n**Access Control**: Users can only delete their own documents.\n\n**Example**:\n\
        ```bash\ncurl -X DELETE \"http://localhost:8000/api/v1/users/alice/kb/documents/abc-123\"\
        \ \\\n  -H \"Authorization: Bearer dev_token\"\n```"
      operationId: delete_user_kb_document_api_v1_users__user_id__kb_documents__doc_id__delete
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          title: User Id
      - name: doc_id
        in: path
        required: true
        schema:
          type: string
          title: Doc Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '204':
          description: Document deleted successfully
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Forbidden
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Not Found
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Service Unavailable
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/users/{user_id}/kb/stats:
    get:
      tags:
      - user_kb
      - user_kb
      summary: Get User Kb Stats
      description: "Get statistics about user's knowledge base.\n\nReturns summary\
        \ information about the user's KB including document count\nand category breakdown.\n\
        \n**Access Control**: Users can only view their own KB stats.\n\n**Example**:\n\
        ```bash\ncurl \"http://localhost:8000/api/v1/users/alice/kb/stats\" \\\n \
        \ -H \"Authorization: Bearer dev_token\"\n```"
      operationId: get_user_kb_stats_api_v1_users__user_id__kb_stats_get
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          title: User Id
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: User KB statistics
          content:
            application/json:
              schema: {}
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Forbidden
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Service Unavailable
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/jobs/{job_id}:
    get:
      tags:
      - job_management
      - job_management
      summary: Get Job Status
      description: 'Get job status with proper polling semantics


        Implements consistent job polling with appropriate headers:

        - 200 OK for running/pending jobs with Retry-After header

        - 303 See Other redirect for completed jobs with results

        - 200 OK for failed/cancelled jobs (terminal states)'
      operationId: get_job_status_api_v1_jobs__job_id__get
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: string
          title: Job Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobStatus'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - job_management
      - job_management
      summary: Cancel Job
      description: 'Cancel a running job


        Attempts to cancel a job if it''s still in a cancellable state.

        Returns 204 No Content on success.'
      operationId: cancel_job_api_v1_jobs__job_id__delete
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: string
          title: Job Id
      responses:
        '204':
          description: Successful Response
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/jobs:
    get:
      tags:
      - job_management
      - job_management
      summary: List Jobs
      description: 'List jobs with optional filtering and pagination


        Returns a paginated list of jobs with proper pagination headers.

        Supports filtering by job status.'
      operationId: list_jobs_api_v1_jobs_get
      parameters:
      - name: status_filter
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter by job status
          title: Status Filter
        description: Filter by job status
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          description: Maximum number of results
          default: 50
          title: Limit
        description: Maximum number of results
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Result offset for pagination
          default: 0
          title: Offset
        description: Result offset for pagination
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JobStatus'
                title: Response List Jobs Api V1 Jobs Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/jobs/health:
    get:
      tags:
      - job_management
      - job_management
      summary: Get Job Service Health
      description: 'Get job service health status


        Returns health information about the job management system,

        including connectivity and performance metrics.'
      operationId: get_job_service_health_api_v1_jobs_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Job Service Health Api V1 Jobs Health Get
  /debug/routes:
    get:
      summary: Debug Routes
      description: List all registered routes (path + methods).
      operationId: debug_routes_debug_routes_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/health:
    get:
      summary: Debug Health
      description: Minimal debug health endpoint.
      operationId: debug_health_debug_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/llm-providers:
    get:
      summary: Debug Llm Providers
      description: Get current LLM provider status and fallback chain.
      operationId: debug_llm_providers_debug_llm_providers_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/protection/health:
    get:
      tags:
      - protection
      - protection
      summary: Get Protection Health
      description: "Get protection system health status\n\nReturns comprehensive health\
        \ information for both basic and intelligent\nprotection components including\
        \ middleware status and configuration validation.\n\nReturns:\n    Dict with\
        \ protection system health status, active components, and validation results\n\
        \    \nRaises:\n    HTTPException: On service layer errors (503, 500)"
      operationId: get_protection_health_api_v1_protection_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                anyOf:
                - type: object
                - type: 'null'
                title: Response Get Protection Health Api V1 Protection Health Get
  /api/v1/protection/metrics:
    get:
      tags:
      - protection
      - protection
      summary: Get Protection Metrics
      description: "Get protection system metrics for monitoring\n\nReturns detailed\
        \ metrics for rate limiting, request deduplication, \nbehavioral analysis,\
        \ ML anomaly detection, and reputation system.\n\nReturns:\n    Dict with\
        \ protection system metrics including request counts, \n    protection rates,\
        \ and component-specific statistics\n    \nRaises:\n    HTTPException: On\
        \ service layer errors (503, 500)"
      operationId: get_protection_metrics_api_v1_protection_metrics_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                anyOf:
                - type: object
                - type: 'null'
                title: Response Get Protection Metrics Api V1 Protection Metrics Get
  /api/v1/protection/config:
    get:
      tags:
      - protection
      - protection
      summary: Get Protection Config
      description: "Get current protection system configuration\n\nReturns sanitized\
        \ configuration information (no sensitive data)\nfor both basic and intelligent\
        \ protection components.\n\nReturns:\n    Dict with protection configuration\
        \ including enabled features,\n    rate limits, timeouts, and security settings\
        \ (sanitized)\n    \nRaises:\n    HTTPException: On service layer errors (503,\
        \ 500)"
      operationId: get_protection_config_api_v1_protection_config_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                anyOf:
                - type: object
                - type: 'null'
                title: Response Get Protection Config Api V1 Protection Config Get
  /:
    get:
      summary: Root
      description: Root endpoint with API information.
      operationId: root__get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health:
    get:
      summary: Health Check
      description: Enhanced health check endpoint with component-specific metrics
        and SLA monitoring.
      operationId: health_check_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health/dependencies:
    get:
      summary: Health Check Dependencies
      description: Enhanced detailed health check for all dependencies with SLA metrics
      operationId: health_check_dependencies_health_dependencies_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /readiness:
    get:
      summary: Readiness
      description: 'Readiness probe: return unready if Redis or ChromaDB are unavailable.'
      operationId: readiness_readiness_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health/logging:
    get:
      summary: Logging Health Check
      description: Get logging system health status.
      operationId: logging_health_check_health_logging_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health/sla:
    get:
      summary: Health Check Sla
      description: Get SLA status and metrics for all components.
      operationId: health_check_sla_health_sla_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health/components/{component_name}:
    get:
      summary: Health Check Component
      description: Get detailed health information for a specific component.
      operationId: health_check_component_health_components__component_name__get
      parameters:
      - name: component_name
        in: path
        required: true
        schema:
          type: string
          title: Component Name
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /health/patterns:
    get:
      summary: Health Check Error Patterns
      description: Get error patterns and recovery information from enhanced error
        context.
      operationId: health_check_error_patterns_health_patterns_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /metrics/performance:
    get:
      summary: Get Performance Metrics
      description: Get comprehensive performance metrics.
      operationId: get_performance_metrics_metrics_performance_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /metrics/realtime:
    get:
      summary: Get Realtime Metrics
      description: Get real-time performance metrics.
      operationId: get_realtime_metrics_metrics_realtime_get
      parameters:
      - name: time_window_minutes
        in: query
        required: false
        schema:
          type: integer
          default: 5
          title: Time Window Minutes
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /metrics/alerts:
    get:
      summary: Get Alert Status
      description: Get current alert status and statistics.
      operationId: get_alert_status_metrics_alerts_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /metrics/optimization:
    get:
      summary: Get System Optimization Metrics
      description: Get comprehensive system optimization metrics.
      operationId: get_system_optimization_metrics_metrics_optimization_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /admin/optimization/trigger-cleanup:
    get:
      summary: Trigger System Cleanup
      description: Trigger comprehensive system cleanup and optimization.
      operationId: trigger_system_cleanup_admin_optimization_trigger_cleanup_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
components:
  schemas:
    AcquisitionGuidance:
      properties:
        commands:
          items:
            type: string
          type: array
          maxItems: 3
          title: Commands
          description: Shell commands to run (max 3)
        file_locations:
          items:
            type: string
          type: array
          maxItems: 3
          title: File Locations
          description: File paths to check (max 3)
        ui_locations:
          items:
            type: string
          type: array
          maxItems: 3
          title: Ui Locations
          description: UI navigation paths (max 3)
        alternatives:
          items:
            type: string
          type: array
          maxItems: 3
          title: Alternatives
          description: Alternative methods (max 3)
        prerequisites:
          items:
            type: string
          type: array
          maxItems: 2
          title: Prerequisites
          description: Requirements to obtain evidence (max 2)
        expected_output:
          anyOf:
          - type: string
            maxLength: 200
          - type: 'null'
          title: Expected Output
          description: What user should expect to see
      type: object
      title: AcquisitionGuidance
      description: Instructions for obtaining diagnostic evidence
    AgentResponse:
      properties:
        schema_version:
          type: string
          title: Schema Version
          default: 3.1.0
        content:
          type: string
          title: Content
        response_type:
          $ref: '#/components/schemas/ResponseType'
        session_id:
          type: string
          title: Session Id
        case_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Case Id
        confidence_score:
          anyOf:
          - type: number
          - type: 'null'
          title: Confidence Score
        sources:
          items:
            $ref: '#/components/schemas/Source'
          type: array
          title: Sources
        next_action_hint:
          anyOf:
          - type: string
          - type: 'null'
          title: Next Action Hint
        view_state:
          anyOf:
          - $ref: '#/components/schemas/ViewState'
          - type: 'null'
        plan:
          anyOf:
          - items:
              $ref: '#/components/schemas/PlanStep'
            type: array
          - type: 'null'
          title: Plan
        evidence_requests:
          items:
            $ref: '#/components/schemas/EvidenceRequest'
          type: array
          title: Evidence Requests
          description: Active evidence requests for this turn
        investigation_mode:
          $ref: '#/components/schemas/InvestigationMode'
          description: Current investigation approach (speed vs depth)
          default: active_incident
        case_status:
          $ref: '#/components/schemas/faultmaven__models__evidence__CaseStatus'
          description: Current case investigation state
          default: consulting
        suggested_actions:
          anyOf:
          - items:
              type: object
            type: array
          - type: 'null'
          title: Suggested Actions
          description: DEPRECATED in v3.1.0 - Use evidence_requests instead. Always
            null in new responses.
          deprecated: true
      additionalProperties: true
      type: object
      required:
      - content
      - response_type
      - session_id
      title: AgentResponse
      description: The single, unified JSON payload returned from the backend (v3.1.0
        - Evidence-Centric).
    AuthTokenResponse:
      properties:
        access_token:
          type: string
          title: Access Token
          description: Bearer access token
          example: 550e8400-e29b-41d4-a716-446655440000
        token_type:
          type: string
          title: Token Type
          description: Token type (always 'bearer')
          default: bearer
        expires_in:
          type: integer
          title: Expires In
          description: Token expiration time in seconds
          example: 86400
        session_id:
          type: string
          title: Session Id
          description: Session identifier for multi-turn conversations
          example: session-550e8400-e29b-41d4-a716-446655440000
        user:
          $ref: '#/components/schemas/UserProfile'
          description: Authenticated user profile
      type: object
      required:
      - access_token
      - expires_in
      - session_id
      - user
      title: AuthTokenResponse
      description: 'Authentication token response


        Standard OAuth2-compatible token response format.

        Includes token, expiration, user information, and session ID.'
      example:
        access_token: 550e8400-e29b-41d4-a716-446655440000
        expires_in: 86400
        session_id: session-550e8400-e29b-41d4-a716-446655440000
        token_type: bearer
        user:
          created_at: '2025-01-15T10:00:00Z'
          display_name: John Doe
          email: john.doe@faultmaven.local
          is_dev_user: true
          roles:
          - user
          - admin
          user_id: 550e8400-e29b-41d4-a716-446655440000
          username: john.doe
    Body_upload_case_data_api_v1_cases__case_id__data_post:
      properties:
        file:
          type: string
          format: binary
          title: File
        session_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
      type: object
      required:
      - file
      title: Body_upload_case_data_api_v1_cases__case_id__data_post
    Body_upload_document_api_v1_knowledge_documents_post:
      properties:
        file:
          type: string
          format: binary
          title: File
        title:
          type: string
          title: Title
        document_type:
          type: string
          title: Document Type
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
        tags:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
        source_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Source Url
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
      type: object
      required:
      - file
      - title
      - document_type
      title: Body_upload_document_api_v1_knowledge_documents_post
    Body_upload_user_kb_document_api_v1_users__user_id__kb_documents_post:
      properties:
        file:
          type: string
          format: binary
          title: File
          description: Runbook or procedure document
        title:
          anyOf:
          - type: string
          - type: 'null'
          title: Title
          description: Document title (defaults to filename)
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
          description: Document category (e.g., 'database', 'networking')
        tags:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
          description: Comma-separated tags
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
          description: Document description
      type: object
      required:
      - file
      title: Body_upload_user_kb_document_api_v1_users__user_id__kb_documents_post
    Case:
      properties:
        case_id:
          type: string
          title: Case Id
        title:
          type: string
          title: Title
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        status:
          type: string
          enum:
          - consulting
          - investigating
          - resolved
          - closed
          title: Status
          default: consulting
        priority:
          type: string
          enum:
          - low
          - medium
          - high
          - critical
          title: Priority
          default: medium
        created_at:
          type: string
          title: Created At
        updated_at:
          type: string
          title: Updated At
        message_count:
          type: integer
          title: Message Count
          default: 0
        owner_id:
          type: string
          title: Owner Id
      type: object
      required:
      - case_id
      - title
      - owner_id
      title: Case
      description: Represents a troubleshooting case.
    CaseCreateRequest:
      properties:
        title:
          anyOf:
          - type: string
            maxLength: 200
          - type: 'null'
          title: Title
          description: Case title (optional, auto-generated if not provided)
        description:
          anyOf:
          - type: string
            maxLength: 2000
          - type: 'null'
          title: Description
          description: Initial problem description
          default: ''
        initial_message:
          anyOf:
          - type: string
            maxLength: 4000
          - type: 'null'
          title: Initial Message
          description: First user message (for CONSULTING phase)
        session_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
          description: Session ID for authentication and case association (restored
            from old implementation)
      type: object
      title: CaseCreateRequest
      description: 'Request to create a new case (v2.0).


        User identity is derived from authentication token, not request body.

        This ensures security and prevents user_id spoofing.'
    CaseDetail:
      properties:
        case_id:
          type: string
          title: Case Id
        title:
          type: string
          title: Title
        description:
          type: string
          title: Description
        status:
          $ref: '#/components/schemas/faultmaven__models__case__CaseStatus'
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          type: string
          format: date-time
          title: Updated At
        last_activity_at:
          type: string
          format: date-time
          title: Last Activity At
        resolved_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Resolved At
        closed_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Closed At
        user_id:
          type: string
          title: User Id
        organization_id:
          type: string
          title: Organization Id
        current_turn:
          type: integer
          title: Current Turn
        turns_without_progress:
          type: integer
          title: Turns Without Progress
        current_stage:
          anyOf:
          - $ref: '#/components/schemas/InvestigationStage'
          - type: 'null'
        milestones_completed:
          items:
            type: string
          type: array
          title: Milestones Completed
        pending_milestones:
          items:
            type: string
          type: array
          title: Pending Milestones
        completion_percentage:
          type: number
          title: Completion Percentage
        evidence_count:
          type: integer
          title: Evidence Count
        hypothesis_count:
          type: integer
          title: Hypothesis Count
        solution_count:
          type: integer
          title: Solution Count
        is_stuck:
          type: boolean
          title: Is Stuck
        is_terminal:
          type: boolean
          title: Is Terminal
        degraded_mode_active:
          type: boolean
          title: Degraded Mode Active
        escalated:
          type: boolean
          title: Escalated
      type: object
      required:
      - case_id
      - title
      - description
      - status
      - created_at
      - updated_at
      - last_activity_at
      - resolved_at
      - closed_at
      - user_id
      - organization_id
      - current_turn
      - turns_without_progress
      - current_stage
      - milestones_completed
      - pending_milestones
      - completion_percentage
      - evidence_count
      - hypothesis_count
      - solution_count
      - is_stuck
      - is_terminal
      - degraded_mode_active
      - escalated
      title: CaseDetail
      description: Detailed case information for single case view.
    CaseListResponse:
      properties:
        cases:
          items:
            $ref: '#/components/schemas/CaseSummary'
          type: array
          title: Cases
        total_count:
          type: integer
          title: Total Count
        limit:
          type: integer
          title: Limit
        offset:
          type: integer
          title: Offset
        has_more:
          type: boolean
          title: Has More
      type: object
      required:
      - cases
      - total_count
      - limit
      - offset
      - has_more
      title: CaseListResponse
      description: Response for case listing.
    CaseMessagesResponse:
      properties:
        messages:
          items:
            $ref: '#/components/schemas/Message'
          type: array
          title: Messages
          description: Array of conversation messages
        total_count:
          type: integer
          title: Total Count
          description: Total number of messages in the case
        retrieved_count:
          type: integer
          title: Retrieved Count
          description: Number of messages successfully retrieved
        has_more:
          type: boolean
          title: Has More
          description: Whether more messages are available for pagination
        next_offset:
          anyOf:
          - type: integer
          - type: 'null'
          title: Next Offset
          description: Offset for next page (null if no more pages)
        debug_info:
          anyOf:
          - $ref: '#/components/schemas/MessageRetrievalDebugInfo'
          - type: 'null'
          description: Debug information (only when include_debug=true)
      type: object
      required:
      - messages
      - total_count
      - retrieved_count
      - has_more
      title: CaseMessagesResponse
      description: Enhanced response model for case message retrieval with debugging
        support.
    CaseQueryRequest:
      properties:
        message:
          type: string
          maxLength: 4000
          minLength: 1
          title: Message
          description: User message
        attachments:
          anyOf:
          - items:
              type: object
            type: array
          - type: 'null'
          title: Attachments
          description: File attachments (file_id, filename, data_type, size, summary,
            s3_uri)
      type: object
      required:
      - message
      title: CaseQueryRequest
      description: 'Request to submit a query to a case investigation.


        Used by POST /cases/{case_id}/queries endpoint.'
    CaseQueryResponse:
      properties:
        agent_response:
          type: string
          title: Agent Response
        turn_number:
          type: integer
          title: Turn Number
        milestones_completed:
          items:
            type: string
          type: array
          title: Milestones Completed
        case_status:
          $ref: '#/components/schemas/faultmaven__models__case__CaseStatus'
        progress_made:
          type: boolean
          title: Progress Made
        is_stuck:
          type: boolean
          title: Is Stuck
      type: object
      required:
      - agent_response
      - turn_number
      - milestones_completed
      - case_status
      - progress_made
      - is_stuck
      title: CaseQueryResponse
      description: 'Response for case query submission.


        Returned by POST /cases/{case_id}/queries endpoint.'
    CaseSearchRequest:
      properties:
        query:
          type: string
          maxLength: 500
          minLength: 1
          title: Query
          description: Search query
        user_id:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
          description: Limit to user's cases
        organization_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Organization Id
          description: Limit to organization's cases
        status:
          anyOf:
          - $ref: '#/components/schemas/CaseStatus-Input'
          - type: 'null'
          description: Filter by status
        limit:
          type: integer
          maximum: 100.0
          minimum: 1.0
          title: Limit
          description: Maximum results
          default: 20
      type: object
      required:
      - query
      title: CaseSearchRequest
      description: Request to search cases.
    CaseStatus-Input:
      type: string
      enum:
      - consulting
      - investigating
      - resolved
      - closed
      title: CaseStatus
      description: "Case lifecycle status.\n\nLifecycle Flow:\n  CONSULTING â†’ INVESTIGATING\
        \ â†’ RESOLVED (terminal)\n                             â†’ CLOSED (terminal)\n\
        \           â†˜ CLOSED (terminal)\n\nTerminal States: RESOLVED, CLOSED (no further\
        \ transitions)"
    CaseSummary:
      properties:
        case_id:
          type: string
          title: Case Id
        title:
          type: string
          title: Title
        status:
          $ref: '#/components/schemas/faultmaven__models__case__CaseStatus'
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          type: string
          format: date-time
          title: Updated At
        last_activity_at:
          type: string
          format: date-time
          title: Last Activity At
        user_id:
          type: string
          title: User Id
        organization_id:
          type: string
          title: Organization Id
        current_turn:
          type: integer
          title: Current Turn
        milestones_completed:
          type: integer
          title: Milestones Completed
        total_milestones:
          type: integer
          title: Total Milestones
          default: 8
        is_stuck:
          type: boolean
          title: Is Stuck
        is_terminal:
          type: boolean
          title: Is Terminal
      type: object
      required:
      - case_id
      - title
      - status
      - created_at
      - updated_at
      - last_activity_at
      - user_id
      - organization_id
      - current_turn
      - milestones_completed
      - is_stuck
      - is_terminal
      title: CaseSummary
      description: Minimal case information for list views.
    CaseUIResponse_Consulting:
      properties:
        case_id:
          type: string
          title: Case Id
          description: Case identifier
        status:
          type: string
          enum:
          - consulting
          const: consulting
          title: Status
          description: Always 'consulting' for this response type
          default: consulting
        title:
          type: string
          maxLength: 200
          title: Title
          description: Case title
        current_turn:
          type: integer
          minimum: 0.0
          title: Current Turn
          description: Current turn counter
        created_at:
          type: string
          format: date-time
          title: Created At
          description: When case was created
        updated_at:
          type: string
          format: date-time
          title: Updated At
          description: Last update timestamp
        uploaded_files_count:
          type: integer
          minimum: 0.0
          title: Uploaded Files Count
          description: Total files uploaded
        consulting:
          $ref: '#/components/schemas/ConsultingResponseData'
          description: Nested consulting phase data
      type: object
      required:
      - case_id
      - title
      - current_turn
      - created_at
      - updated_at
      - uploaded_files_count
      - consulting
      title: CaseUIResponse_Consulting
      description: 'UI response for CONSULTING phase.


        Focus: Understanding the problem, asking clarifying questions.

        User hasn''t committed to full investigation yet.'
    CaseUIResponse_Investigating:
      properties:
        case_id:
          type: string
          title: Case Id
          description: Case identifier
        status:
          type: string
          enum:
          - investigating
          const: investigating
          title: Status
          description: Always 'investigating' for this response type
          default: investigating
        title:
          type: string
          maxLength: 200
          title: Title
          description: Case title
        created_at:
          type: string
          format: date-time
          title: Created At
          description: When case was created
        updated_at:
          type: string
          format: date-time
          title: Updated At
          description: Last update timestamp
        working_conclusion:
          anyOf:
          - $ref: '#/components/schemas/WorkingConclusionSummary'
          - type: 'null'
          description: Agent's current understanding of the problem
        progress:
          $ref: '#/components/schemas/InvestigationProgressSummary'
          description: Milestone-based progress tracking
        active_hypotheses:
          items:
            $ref: '#/components/schemas/HypothesisSummary'
          type: array
          title: Active Hypotheses
          description: Hypotheses currently being tested
        latest_evidence:
          items:
            $ref: '#/components/schemas/EvidenceSummary'
          type: array
          title: Latest Evidence
          description: Most recent evidence collected (last 5)
        next_actions:
          items:
            type: string
          type: array
          title: Next Actions
          description: Suggested next steps for investigation
        agent_status:
          type: string
          maxLength: 500
          title: Agent Status
          description: What agent is currently doing
        is_stuck:
          type: boolean
          title: Is Stuck
          description: Whether investigation is stuck (no progress for 3+ turns)
          default: false
        degraded_mode:
          type: boolean
          title: Degraded Mode
          description: Whether investigation is in degraded mode
          default: false
        investigation_strategy:
          anyOf:
          - $ref: '#/components/schemas/InvestigationStrategyData'
          - type: 'null'
          description: Investigation strategy with approach and next steps
        problem_verification:
          anyOf:
          - $ref: '#/components/schemas/ProblemVerificationData'
          - type: 'null'
          description: Problem verification details (urgency, severity, impact)
      type: object
      required:
      - case_id
      - title
      - created_at
      - updated_at
      - progress
      - agent_status
      title: CaseUIResponse_Investigating
      description: 'UI response for INVESTIGATING phase.


        Focus: Active investigation, milestone progress, hypothesis testing.

        User has committed to investigation and agent is working through milestones.'
    CaseUIResponse_Resolved:
      properties:
        case_id:
          type: string
          title: Case Id
          description: Case identifier
        status:
          type: string
          enum:
          - resolved
          const: resolved
          title: Status
          description: Always 'resolved' for this response type
          default: resolved
        title:
          type: string
          maxLength: 200
          title: Title
          description: Case title
        created_at:
          type: string
          format: date-time
          title: Created At
          description: When case was created
        updated_at:
          type: string
          format: date-time
          title: Updated At
          description: Last update timestamp
        resolved_at:
          type: string
          format: date-time
          title: Resolved At
          description: When case was resolved
        root_cause:
          $ref: '#/components/schemas/RootCauseSummary'
          description: What caused the problem
        solution_applied:
          $ref: '#/components/schemas/SolutionSummary'
          description: Solution that fixed the problem
        verification_status:
          $ref: '#/components/schemas/VerificationStatus'
          description: How solution effectiveness was verified
        resolution_summary:
          $ref: '#/components/schemas/ResolutionSummary'
          description: Overall resolution metrics and insights
        reports_available:
          items:
            $ref: '#/components/schemas/ReportAvailability'
          type: array
          title: Reports Available
          description: Available reports (incident report, post-mortem, runbook)
      type: object
      required:
      - case_id
      - title
      - created_at
      - updated_at
      - resolved_at
      - root_cause
      - solution_applied
      - verification_status
      - resolution_summary
      title: CaseUIResponse_Resolved
      description: 'UI response for RESOLVED phase.


        Focus: Resolution summary, root cause, solution applied, verification.

        Investigation complete, case closed with solution.'
    CaseUpdateRequest:
      properties:
        title:
          anyOf:
          - type: string
            maxLength: 200
          - type: 'null'
          title: Title
          description: Updated title
        description:
          anyOf:
          - type: string
            maxLength: 2000
          - type: 'null'
          title: Description
          description: Updated description
        status:
          anyOf:
          - $ref: '#/components/schemas/CaseStatus-Input'
          - type: 'null'
          description: Updated status (admin only)
      type: object
      title: CaseUpdateRequest
      description: Request to update an existing case.
    ConsultingResponseData:
      properties:
        proposed_problem_statement:
          anyOf:
          - type: string
            maxLength: 1000
          - type: 'null'
          title: Proposed Problem Statement
          description: Agent's formalized problem statement (if ready)
        problem_statement_confirmed:
          type: boolean
          title: Problem Statement Confirmed
          description: Whether user confirmed the problem statement
          default: false
        decided_to_investigate:
          type: boolean
          title: Decided To Investigate
          description: Whether agent has enough info to start investigation
          default: false
        consultation_turns:
          type: integer
          minimum: 0.0
          title: Consultation Turns
          description: Number of conversation turns during consulting phase
          default: 0
        problem_confirmation:
          anyOf:
          - type: object
          - type: 'null'
          title: Problem Confirmation
          description: Problem type and severity guess
      type: object
      title: ConsultingResponseData
      description: Nested consulting data for CONSULTING phase response.
    DataType:
      type: string
      enum:
      - logs_and_errors
      - unstructured_text
      - structured_config
      - metrics_and_performance
      - source_code
      - visual_evidence
      - unanalyzable
      title: DataType
      description: 7 purpose-driven data classifications for preprocessing pipeline.
    DataUploadResponse:
      properties:
        schema_version:
          type: string
          enum:
          - 3.1.0
          const: 3.1.0
          title: Schema Version
          default: 3.1.0
        data_id:
          type: string
          title: Data Id
        case_id:
          type: string
          title: Case Id
          description: Actual case ID (may differ from optimistic ID in request)
        filename:
          type: string
          title: Filename
          description: Uploaded filename
        file_size:
          type: integer
          title: File Size
          description: File size in bytes
        data_type:
          type: string
          title: Data Type
          description: Classified data type
        processing_status:
          $ref: '#/components/schemas/ProcessingStatus'
        uploaded_at:
          type: string
          title: Uploaded At
          description: Upload timestamp (ISO 8601)
        agent_response:
          anyOf:
          - $ref: '#/components/schemas/AgentResponse'
          - type: 'null'
          description: Conversational AI analysis of the uploaded data
        classification:
          anyOf:
          - type: object
          - type: 'null'
          title: Classification
          description: Classification confidence and metadata
        view_state:
          anyOf:
          - $ref: '#/components/schemas/ViewState'
          - type: 'null'
      type: object
      required:
      - data_id
      - case_id
      - filename
      - file_size
      - data_type
      - processing_status
      - uploaded_at
      title: DataUploadResponse
      description: Response payload for data upload with AI analysis.
    DerivedEvidenceSummary:
      properties:
        evidence_id:
          type: string
          title: Evidence Id
        summary:
          type: string
          maxLength: 500
          title: Summary
        category:
          type: string
          title: Category
          description: SYMPTOM_EVIDENCE | CAUSAL_EVIDENCE | RESOLUTION_EVIDENCE |
            OTHER
        collected_at_turn:
          type: integer
          title: Collected At Turn
        related_hypothesis_ids:
          items:
            type: string
          type: array
          title: Related Hypothesis Ids
      type: object
      required:
      - evidence_id
      - summary
      - category
      - collected_at_turn
      title: DerivedEvidenceSummary
      description: Summary of evidence derived from an uploaded file.
    DevLoginRequest:
      properties:
        username:
          type: string
          maxLength: 50
          minLength: 3
          title: Username
          description: Username or email address (3-50 chars)
          example: developer@example.com
        email:
          anyOf:
          - type: string
          - type: 'null'
          title: Email
          description: Optional email address (will auto-generate if not provided)
          example: john.doe@faultmaven.local
        display_name:
          anyOf:
          - type: string
            maxLength: 100
          - type: 'null'
          title: Display Name
          description: Optional display name (will auto-generate if not provided)
          example: John Doe
      type: object
      required:
      - username
      title: DevLoginRequest
      description: 'Request model for development login


        Validates user input for the dev-login endpoint.

        Supports username-based login with optional user details.'
      example:
        display_name: John Doe
        email: john.doe@faultmaven.local
        username: john.doe
    ErrorDetail:
      properties:
        code:
          type: string
          title: Code
        message:
          type: string
          title: Message
        session_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
        timeout_info:
          anyOf:
          - type: object
          - type: 'null'
          title: Timeout Info
      type: object
      required:
      - code
      - message
      title: ErrorDetail
      description: A detailed error message with optional session-specific error codes.
    ErrorResponse:
      properties:
        schema_version:
          type: string
          enum:
          - 3.1.0
          const: 3.1.0
          title: Schema Version
          default: 3.1.0
        error:
          $ref: '#/components/schemas/ErrorDetail'
      type: object
      required:
      - error
      title: ErrorResponse
      description: The standard JSON payload returned from the backend on failure.
    EvidenceCategory:
      type: string
      enum:
      - symptoms
      - timeline
      - changes
      - configuration
      - scope
      - metrics
      - environment
      title: EvidenceCategory
      description: Categories of diagnostic evidence
    EvidenceDetailsResponse:
      properties:
        evidence_id:
          type: string
          title: Evidence Id
        case_id:
          type: string
          title: Case Id
        summary:
          type: string
          maxLength: 500
          title: Summary
        category:
          type: string
          title: Category
        primary_purpose:
          type: string
          title: Primary Purpose
        collected_at_turn:
          type: integer
          title: Collected At Turn
        collected_at:
          type: string
          format: date-time
          title: Collected At
        collected_by:
          type: string
          title: Collected By
        source_file:
          anyOf:
          - $ref: '#/components/schemas/SourceFileReference'
          - type: 'null'
          description: Source file this evidence was derived from (null if from user
            input)
        related_hypotheses:
          items:
            $ref: '#/components/schemas/RelatedHypothesis'
          type: array
          title: Related Hypotheses
        preprocessed_content:
          type: string
          title: Preprocessed Content
        content_size_bytes:
          type: integer
          title: Content Size Bytes
        analysis:
          anyOf:
          - type: string
          - type: 'null'
          title: Analysis
      type: object
      required:
      - evidence_id
      - case_id
      - summary
      - category
      - primary_purpose
      - collected_at_turn
      - collected_at
      - collected_by
      - preprocessed_content
      - content_size_bytes
      title: EvidenceDetailsResponse
      description: Detailed evidence information with source and hypothesis linkage.
    EvidenceRequest:
      properties:
        request_id:
          type: string
          title: Request Id
          description: Unique identifier for this evidence request
        label:
          type: string
          maxLength: 100
          title: Label
          description: Brief title for the request
        description:
          type: string
          maxLength: 500
          title: Description
          description: What evidence is needed and why
        category:
          $ref: '#/components/schemas/EvidenceCategory'
          description: Category of diagnostic evidence
        guidance:
          $ref: '#/components/schemas/AcquisitionGuidance'
          description: Instructions for obtaining evidence
        status:
          $ref: '#/components/schemas/EvidenceStatus'
          description: Fulfillment status
          default: pending
        created_at_turn:
          type: integer
          minimum: 0.0
          title: Created At Turn
          description: Turn number when request was created
        updated_at_turn:
          anyOf:
          - type: integer
            minimum: 0.0
          - type: 'null'
          title: Updated At Turn
          description: Turn number when last updated
        completeness:
          type: number
          maximum: 1.0
          minimum: 0.0
          title: Completeness
          description: Fulfillment completeness score
          default: 0.0
        requested_by_ooda_step:
          anyOf:
          - type: string
          - type: 'null'
          title: Requested By Ooda Step
          description: Which OODA step generated this (observe, orient, decide, act)
        for_hypothesis_id:
          anyOf:
          - type: string
          - type: 'null'
          title: For Hypothesis Id
          description: Hypothesis ID this evidence tests (Phase 4 validation)
        priority:
          type: integer
          maximum: 3.0
          minimum: 1.0
          title: Priority
          description: 1=critical, 2=important, 3=nice-to-have
          default: 2
        metadata:
          type: object
          title: Metadata
          description: Additional context
      type: object
      required:
      - label
      - description
      - category
      - guidance
      - created_at_turn
      title: EvidenceRequest
      description: 'Structured request for diagnostic evidence with acquisition guidance


        OODA Integration: Generated during OODA Observe step, linked to hypothesis
        testing'
      example:
        category: metrics
        completeness: 0.0
        created_at_turn: 1
        description: Current error rate vs baseline to quantify severity
        guidance:
          alternatives:
          - Check New Relic error rate graph
          commands:
          - kubectl logs -l app=api --since=2h | grep '500' | wc -l
          expected_output: 'Error count (baseline: 2-3/hour)'
          file_locations: []
          prerequisites:
          - kubectl access
          ui_locations:
          - Datadog > API Errors Dashboard
        label: Error rate metrics
        request_id: er-001
        status: pending
    EvidenceStatus:
      type: string
      enum:
      - pending
      - partial
      - complete
      - blocked
      - obsolete
      title: EvidenceStatus
      description: Status of evidence request fulfillment
    EvidenceSummary:
      properties:
        evidence_id:
          type: string
          title: Evidence Id
          description: Evidence identifier
        type:
          type: string
          maxLength: 100
          title: Type
          description: 'Evidence type: log_file | metrics_data | config_file | etc.'
        summary:
          type: string
          maxLength: 500
          title: Summary
          description: Brief summary of evidence content
        timestamp:
          type: string
          format: date-time
          title: Timestamp
          description: When evidence was collected
        relevance_score:
          type: number
          maximum: 1.0
          minimum: 0.0
          title: Relevance Score
          description: Relevance to current investigation (0.0-1.0)
      type: object
      required:
      - evidence_id
      - type
      - summary
      - timestamp
      - relevance_score
      title: EvidenceSummary
      description: Summary of evidence for INVESTIGATING phase UI.
    FileAnalysis:
      properties:
        key_findings:
          items:
            type: string
          type: array
          title: Key Findings
        timeline_events:
          items:
            $ref: '#/components/schemas/TimelineEvent'
          type: array
          title: Timeline Events
        relevance:
          anyOf:
          - type: string
          - type: 'null'
          title: Relevance
      type: object
      title: FileAnalysis
      description: Detailed AI analysis of file.
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    HypothesisRelationship:
      properties:
        hypothesis_id:
          type: string
          title: Hypothesis Id
        hypothesis_description:
          type: string
          title: Hypothesis Description
        stance:
          type: string
          title: Stance
          description: strongly_supports | supports | neutral | contradicts | strongly_contradicts
            | irrelevant
        reasoning:
          type: string
          title: Reasoning
      type: object
      required:
      - hypothesis_id
      - hypothesis_description
      - stance
      - reasoning
      title: HypothesisRelationship
      description: How a file relates to a hypothesis.
    HypothesisStatus:
      type: string
      enum:
      - captured
      - active
      - validated
      - refuted
      - inconclusive
      - retired
      title: HypothesisStatus
      description: Hypothesis lifecycle status
    HypothesisSummary:
      properties:
        hypothesis_id:
          type: string
          title: Hypothesis Id
          description: Hypothesis identifier
        text:
          type: string
          maxLength: 500
          title: Text
          description: Hypothesis statement
        likelihood:
          type: number
          maximum: 1.0
          minimum: 0.0
          title: Likelihood
          description: Likelihood score (0.0-1.0)
        status:
          $ref: '#/components/schemas/HypothesisStatus'
          description: 'Status: CAPTURED | ACTIVE | VALIDATED | REFUTED | INCONCLUSIVE
            | RETIRED'
        evidence_count:
          type: integer
          minimum: 0.0
          title: Evidence Count
          description: Number of evidence items related to this hypothesis
      type: object
      required:
      - hypothesis_id
      - text
      - likelihood
      - status
      - evidence_count
      title: HypothesisSummary
      description: Summary of a hypothesis for INVESTIGATING phase UI.
    ImpactData:
      properties:
        affected_services:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Affected Services
          description: List of affected services
        affected_users:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Affected Users
          description: User impact description (e.g., 'All users in US region')
        affected_regions:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Affected Regions
          description: List of affected geographical regions
      type: object
      title: ImpactData
      description: Impact assessment for problem scope.
    InvestigationMode:
      type: string
      enum:
      - active_incident
      - post_mortem
      title: InvestigationMode
      description: 'Investigation approach - speed vs depth


        DEPRECATED: Use InvestigationStrategy from investigation.py instead

        Kept for backwards compatibility'
    InvestigationProgressSummary:
      properties:
        milestones_completed:
          type: integer
          minimum: 0.0
          title: Milestones Completed
          description: Number of milestones completed
        total_milestones:
          type: integer
          minimum: 0.0
          title: Total Milestones
          description: Total milestones (always 8)
        completed_milestone_ids:
          items:
            type: string
          type: array
          title: Completed Milestone Ids
          description: IDs of completed milestones
        current_stage:
          $ref: '#/components/schemas/InvestigationStage'
          description: 'Current stage: UNDERSTANDING | DIAGNOSING | RESOLVING'
      type: object
      required:
      - milestones_completed
      - total_milestones
      - current_stage
      title: InvestigationProgressSummary
      description: Progress metrics for INVESTIGATING phase.
    InvestigationStage:
      type: string
      enum:
      - symptom_verification
      - hypothesis_formulation
      - hypothesis_validation
      - solution
      title: InvestigationStage
      description: 'Investigation stage within INVESTIGATING phase (4 stages).


        Purpose: User-facing progress label computed from completed milestones.

        NOT used for workflow control - milestones drive advancement opportunistically.

        Only relevant when case status = INVESTIGATING.


        Stage Progression (Path-Dependent):

        - MITIGATION_FIRST: 1 â†’ 4 â†’ 2 â†’ 3 â†’ 4 (quick mitigation, then return for RCA)

        - ROOT_CAUSE: 1 â†’ 2 â†’ 3 â†’ 4 (traditional RCA)


        Stage determines the investigation focus based on what has been completed:

        - Stage 1: Where and when (symptom verification)

        - Stage 2: Why (hypothesis formulation)

        - Stage 3: Why really (hypothesis validation)

        - Stage 4: How (solution application)'
    InvestigationStrategyData:
      properties:
        approach:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Approach
          description: Investigation approach description (e.g., 'Speed priority -
            rapid mitigation')
        next_steps:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Next Steps
          description: Recommended next steps in investigation
      type: object
      title: InvestigationStrategyData
      description: Investigation strategy details for INVESTIGATING phase.
    JobStatus:
      properties:
        job_id:
          type: string
          title: Job Id
        status:
          type: string
          enum:
          - pending
          - running
          - completed
          - failed
          title: Status
        progress:
          anyOf:
          - type: integer
          - type: 'null'
          title: Progress
        result:
          anyOf:
          - type: object
          - type: 'null'
          title: Result
        error:
          anyOf:
          - type: string
          - type: 'null'
          title: Error
        created_at:
          type: string
          title: Created At
        updated_at:
          type: string
          title: Updated At
      type: object
      required:
      - job_id
      - status
      - created_at
      - updated_at
      title: JobStatus
      description: Async job status tracking model.
    KnowledgeBaseDocument:
      properties:
        document_id:
          type: string
          title: Document Id
        title:
          type: string
          title: Title
        content:
          type: string
          title: Content
        document_type:
          type: string
          title: Document Type
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
        status:
          type: string
          title: Status
          default: processed
        tags:
          items:
            type: string
          type: array
          title: Tags
        source_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Source Url
        created_at:
          type: string
          title: Created At
        updated_at:
          type: string
          title: Updated At
        metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Metadata
      type: object
      required:
      - document_id
      - title
      - content
      - document_type
      - created_at
      - updated_at
      title: KnowledgeBaseDocument
      description: Response model for knowledge base document operations.
    LogoutResponse:
      properties:
        message:
          type: string
          title: Message
          description: Logout confirmation message
          default: Logged out successfully
        revoked_tokens:
          type: integer
          title: Revoked Tokens
          description: Number of tokens that were revoked
          example: 1
      type: object
      required:
      - revoked_tokens
      title: LogoutResponse
      description: Logout response model
      example:
        message: Logged out successfully
        revoked_tokens: 1
    Message:
      properties:
        message_id:
          type: string
          title: Message Id
        turn_number:
          type: integer
          title: Turn Number
          description: Turn number in conversation (user messages increment turn)
        role:
          type: string
          enum:
          - user
          - agent
          - assistant
          - system
          title: Role
        content:
          type: string
          title: Content
        created_at:
          type: string
          title: Created At
          description: ISO 8601 datetime string (matches SQL schema)
        author_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Author Id
          description: User who created the message
        token_count:
          anyOf:
          - type: integer
          - type: 'null'
          title: Token Count
          description: Number of tokens in content
        metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Metadata
          description: Sources, tools used, etc.
      type: object
      required:
      - message_id
      - turn_number
      - role
      - content
      - created_at
      title: Message
      description: 'Message model for conversation endpoints.


        Schema matches case-storage-design.md Section 4.7 (case_messages table).'
    MessageRetrievalDebugInfo:
      properties:
        redis_key:
          type: string
          title: Redis Key
          description: Redis key used for message storage
        redis_operation_time_ms:
          type: number
          title: Redis Operation Time Ms
          description: Time taken for Redis operation
        storage_errors:
          items:
            type: string
          type: array
          title: Storage Errors
          description: Any storage-related errors encountered
        message_parsing_errors:
          type: integer
          title: Message Parsing Errors
          description: Number of messages that failed to parse
          default: 0
      type: object
      required:
      - redis_key
      - redis_operation_time_ms
      title: MessageRetrievalDebugInfo
      description: Debug information for message retrieval operations.
    PlanStep:
      properties:
        description:
          type: string
          title: Description
      type: object
      required:
      - description
      title: PlanStep
      description: Represents one step in a multi-step plan.
    ProblemVerificationData:
      properties:
        urgency_level:
          anyOf:
          - type: string
            maxLength: 50
          - type: 'null'
          title: Urgency Level
          description: 'Urgency: critical | high | medium | low | unknown'
        severity:
          anyOf:
          - type: string
            maxLength: 50
          - type: 'null'
          title: Severity
          description: 'Severity: critical | high | medium | low'
        temporal_state:
          anyOf:
          - $ref: '#/components/schemas/TemporalStateData'
          - type: 'null'
          description: When the problem occurred and its temporal pattern
        impact:
          anyOf:
          - $ref: '#/components/schemas/ImpactData'
          - type: 'null'
          description: Scope of impact (services, users, regions)
        user_impact:
          anyOf:
          - type: string
            maxLength: 1000
          - type: 'null'
          title: User Impact
          description: Human-readable user impact summary
      type: object
      title: ProblemVerificationData
      description: Problem verification details for INVESTIGATING phase.
    ProcessingStatus:
      type: string
      enum:
      - pending
      - processing
      - completed
      - failed
      title: ProcessingStatus
      description: Defines the status of data processing operations.
    RelatedHypothesis:
      properties:
        hypothesis_id:
          type: string
          title: Hypothesis Id
        statement:
          type: string
          title: Statement
        stance:
          type: string
          title: Stance
          description: SUPPORTS | REFUTES | NEUTRAL
      type: object
      required:
      - hypothesis_id
      - statement
      - stance
      title: RelatedHypothesis
      description: Hypothesis linked to this evidence.
    ReportAvailability:
      properties:
        report_type:
          type: string
          maxLength: 100
          title: Report Type
          description: 'Type: incident_report | post_mortem | runbook | timeline'
        status:
          type: string
          maxLength: 50
          title: Status
          description: 'Status: available | recommended | in_progress | not_applicable'
        reason:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Reason
          description: Reason for status (e.g., why recommended)
      type: object
      required:
      - report_type
      - status
      title: ReportAvailability
      description: Report generation availability status for RESOLVED phase.
    ResolutionSummary:
      properties:
        total_duration_minutes:
          type: integer
          minimum: 0.0
          title: Total Duration Minutes
          description: Total time from case creation to resolution
        milestones_completed:
          type: integer
          minimum: 0.0
          title: Milestones Completed
          description: Total milestones completed (should be 8)
        hypotheses_tested:
          type: integer
          minimum: 0.0
          title: Hypotheses Tested
          description: Number of hypotheses tested
        evidence_collected:
          type: integer
          minimum: 0.0
          title: Evidence Collected
          description: Total evidence items collected
        key_insights:
          items:
            type: string
          type: array
          title: Key Insights
          description: Key learnings from this investigation
      type: object
      required:
      - total_duration_minutes
      - milestones_completed
      - hypotheses_tested
      - evidence_collected
      title: ResolutionSummary
      description: Overall resolution metrics for RESOLVED phase.
    ResponseType:
      type: string
      enum:
      - ANSWER
      - PLAN_PROPOSAL
      - CLARIFICATION_REQUEST
      - CONFIRMATION_REQUEST
      - SOLUTION_READY
      - NEEDS_MORE_DATA
      - ESCALATION_REQUIRED
      - VISUAL_DIAGRAM
      - COMPARISON_TABLE
      title: ResponseType
      description: 'Defines the agent''s primary intent for this turn - v3.0 Response-Format-Driven
        Design


        9 response formats designed to serve 16 QueryIntent categories (1.8:1 ratio).

        Each format has strict structural requirements for frontend parsing.'
    RootCauseSummary:
      properties:
        description:
          type: string
          maxLength: 1000
          title: Description
          description: What caused the problem
        root_cause_id:
          type: string
          title: Root Cause Id
          description: Root cause identifier
        category:
          type: string
          maxLength: 100
          title: Category
          description: 'Category: code | config | environment | network | data | hardware
            | external | human | other'
        severity:
          type: string
          maxLength: 50
          title: Severity
          description: 'Severity: critical | high | medium | low'
      type: object
      required:
      - description
      - root_cause_id
      - category
      - severity
      title: RootCauseSummary
      description: Root cause information for RESOLVED phase.
    SearchRequest:
      properties:
        query:
          type: string
          minLength: 1
          title: Query
          description: Search query
        document_type:
          anyOf:
          - type: string
          - type: 'null'
          title: Document Type
          description: Filter by document type
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
          description: Filter by document category
        tags:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
          description: Filter by tags (comma-separated)
        filters:
          anyOf:
          - type: object
          - type: 'null'
          title: Filters
          description: Advanced filters for search
        similarity_threshold:
          anyOf:
          - type: number
            maximum: 1.0
            minimum: 0.0
          - type: 'null'
          title: Similarity Threshold
          description: Minimum similarity score threshold (0.0-1.0)
        rank_by:
          anyOf:
          - type: string
          - type: 'null'
          title: Rank By
          description: Field to rank results by (e.g., priority)
        limit:
          type: integer
          maximum: 100.0
          exclusiveMinimum: 0.0
          title: Limit
          description: Maximum number of results
          default: 10
      type: object
      required:
      - query
      title: SearchRequest
      description: Request model for knowledge base search
    SessionCreateRequest:
      properties:
        timeout_minutes:
          anyOf:
          - type: integer
            maximum: 480.0
            minimum: 60.0
          - type: 'null'
          title: Timeout Minutes
          description: 'Session timeout in minutes. Min: 60 (1 hour), Max: 480 (8
            hours), Default: 180 (3 hours)'
          default: 180
          examples:
          - 180
          - 240
          - 360
        session_type:
          anyOf:
          - type: string
            minLength: 1
          - type: 'null'
          title: Session Type
          default: troubleshooting
        metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Metadata
        client_id:
          anyOf:
          - type: string
            maxLength: 255
            minLength: 1
          - type: 'null'
          title: Client Id
          description: Client/device identifier for session resumption. If provided,
            existing session for this client will be resumed.
          examples:
          - 550e8400-e29b-41d4-a716-446655440000
      type: object
      title: SessionCreateRequest
      description: Request model for session creation.
    SessionResponse:
      properties:
        schema_version:
          type: string
          enum:
          - 3.1.0
          const: 3.1.0
          title: Schema Version
          default: 3.1.0
        session_id:
          type: string
          title: Session Id
        user_id:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
        client_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Client Id
        status:
          $ref: '#/components/schemas/SessionStatus'
          default: active
        created_at:
          type: string
          title: Created At
        expires_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Expires At
        metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Metadata
        session_resumed:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Session Resumed
      type: object
      required:
      - session_id
      - created_at
      title: SessionResponse
      description: Response payload for session operations - API spec compliance.
    SessionRestoreRequest:
      properties:
        restore_point:
          type: string
          minLength: 1
          title: Restore Point
        include_data:
          type: boolean
          title: Include Data
          default: true
        type:
          anyOf:
          - type: string
          - type: 'null'
          title: Type
          default: full
      type: object
      required:
      - restore_point
      title: SessionRestoreRequest
      description: Request model for session restoration.
    SessionStatus:
      type: string
      enum:
      - active
      - expired
      - terminated
      title: SessionStatus
      description: Defines the status of user sessions.
    SolutionSummary:
      properties:
        description:
          type: string
          maxLength: 2000
          title: Description
          description: What was done to fix the problem
        applied_at:
          type: string
          format: date-time
          title: Applied At
          description: When solution was applied
        applied_by:
          type: string
          title: Applied By
          description: Who applied the solution (user_id or 'agent')
      type: object
      required:
      - description
      - applied_at
      - applied_by
      title: SolutionSummary
      description: Solution information for RESOLVED phase.
    Source:
      properties:
        type:
          $ref: '#/components/schemas/SourceType'
        content:
          type: string
          title: Content
        confidence:
          anyOf:
          - type: number
          - type: 'null'
          title: Confidence
        metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Metadata
      type: object
      required:
      - type
      - content
      title: Source
      description: Represents a single piece of citable evidence to build user trust.
    SourceFileReference:
      properties:
        file_id:
          type: string
          title: File Id
        filename:
          type: string
          title: Filename
        uploaded_at_turn:
          type: integer
          title: Uploaded At Turn
      type: object
      required:
      - file_id
      - filename
      - uploaded_at_turn
      title: SourceFileReference
      description: Reference to source file that evidence was derived from.
    SourceType:
      type: string
      enum:
      - knowledge_base
      - log_file
      - web_search
      - documentation
      - previous_analysis
      - user_provided
      title: SourceType
      description: Defines the origin of a piece of evidence.
    TemporalStateData:
      properties:
        started_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Started At
          description: When the problem started
        last_occurrence_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Last Occurrence At
          description: Most recent occurrence of the problem
        state:
          anyOf:
          - type: string
            maxLength: 50
          - type: 'null'
          title: State
          description: 'Temporal state: ongoing | historical | intermittent'
      type: object
      title: TemporalStateData
      description: Temporal information about problem occurrence.
    TimelineEvent:
      properties:
        timestamp:
          type: string
          format: date-time
          title: Timestamp
        event:
          type: string
          title: Event
      type: object
      required:
      - timestamp
      - event
      title: TimelineEvent
      description: Timeline event extracted from file.
    TitleResponse:
      properties:
        schema_version:
          type: string
          title: Schema Version
          default: 3.1.0
        title:
          type: string
          title: Title
      type: object
      required:
      - title
      title: TitleResponse
      description: Simplified title response schema per API spec.
    UploadedData:
      properties:
        id:
          type: string
          title: Id
        name:
          type: string
          title: Name
        type:
          $ref: '#/components/schemas/DataType'
        size_bytes:
          type: integer
          title: Size Bytes
        upload_timestamp:
          type: string
          title: Upload Timestamp
        processing_status:
          $ref: '#/components/schemas/ProcessingStatus'
        processing_summary:
          anyOf:
          - type: string
          - type: 'null'
          title: Processing Summary
        confidence_score:
          anyOf:
          - type: number
          - type: 'null'
          title: Confidence Score
      type: object
      required:
      - id
      - name
      - type
      - size_bytes
      - upload_timestamp
      - processing_status
      title: UploadedData
      description: A strongly-typed model for data uploaded by the user.
    UploadedFileDetails:
      properties:
        file_id:
          type: string
          title: File Id
          description: Evidence/File identifier
        filename:
          type: string
          title: Filename
          description: Original or generated filename
        size_bytes:
          type: integer
          minimum: 0.0
          title: Size Bytes
          description: File size in bytes
        size_display:
          type: string
          title: Size Display
          description: Human-readable size (e.g., '2.3 MB')
        uploaded_at_turn:
          type: integer
          minimum: 0.0
          title: Uploaded At Turn
          description: Turn when file was uploaded
        uploaded_at:
          type: string
          format: date-time
          title: Uploaded At
          description: Upload timestamp
        source_type:
          type: string
          title: Source Type
          description: file_upload | paste | screenshot | page_injection | agent_generated
        analysis_status:
          type: string
          title: Analysis Status
          description: pending | processing | completed | failed
        summary:
          anyOf:
          - type: string
          - type: 'null'
          title: Summary
          description: AI-generated summary (1-2 sentences)
        source_metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Source Metadata
          description: Additional metadata for page injections
        full_analysis:
          anyOf:
          - $ref: '#/components/schemas/FileAnalysis'
          - type: 'null'
          description: Detailed AI analysis
        hypothesis_relationships:
          anyOf:
          - items:
              $ref: '#/components/schemas/HypothesisRelationship'
            type: array
          - type: 'null'
          title: Hypothesis Relationships
          description: How this file relates to hypotheses (investigating phase only)
      type: object
      required:
      - file_id
      - filename
      - size_bytes
      - size_display
      - uploaded_at_turn
      - uploaded_at
      - source_type
      - analysis_status
      title: UploadedFileDetails
      description: Detailed file information including analysis.
    UploadedFileDetailsResponse:
      properties:
        file_id:
          type: string
          title: File Id
        filename:
          type: string
          title: Filename
        size_bytes:
          type: integer
          title: Size Bytes
        size_display:
          type: string
          title: Size Display
        uploaded_at_turn:
          type: integer
          title: Uploaded At Turn
        uploaded_at:
          type: string
          format: date-time
          title: Uploaded At
        source_type:
          type: string
          title: Source Type
        data_type:
          type: string
          title: Data Type
        summary:
          anyOf:
          - type: string
          - type: 'null'
          title: Summary
        derived_evidence:
          items:
            $ref: '#/components/schemas/DerivedEvidenceSummary'
          type: array
          title: Derived Evidence
        evidence_count:
          type: integer
          minimum: 0.0
          title: Evidence Count
      type: object
      required:
      - file_id
      - filename
      - size_bytes
      - size_display
      - uploaded_at_turn
      - uploaded_at
      - source_type
      - data_type
      - evidence_count
      title: UploadedFileDetailsResponse
      description: Detailed information about an uploaded file with evidence linkage.
    UploadedFileMetadata:
      properties:
        file_id:
          type: string
          title: File Id
          description: Evidence/File identifier
        filename:
          type: string
          title: Filename
          description: Original or generated filename
        size_bytes:
          type: integer
          minimum: 0.0
          title: Size Bytes
          description: File size in bytes
        size_display:
          type: string
          title: Size Display
          description: Human-readable size (e.g., '2.3 MB')
        uploaded_at_turn:
          type: integer
          minimum: 0.0
          title: Uploaded At Turn
          description: Turn when file was uploaded
        uploaded_at:
          type: string
          format: date-time
          title: Uploaded At
          description: Upload timestamp
        source_type:
          type: string
          title: Source Type
          description: file_upload | paste | screenshot | page_injection | agent_generated
        analysis_status:
          type: string
          title: Analysis Status
          description: pending | processing | completed | failed
        summary:
          anyOf:
          - type: string
          - type: 'null'
          title: Summary
          description: AI-generated summary (1-2 sentences)
        source_metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Source Metadata
          description: Additional metadata for page injections
      type: object
      required:
      - file_id
      - filename
      - size_bytes
      - size_display
      - uploaded_at_turn
      - uploaded_at
      - source_type
      - analysis_status
      title: UploadedFileMetadata
      description: Metadata for uploaded files (evidence) - List view.
    UploadedFilesList:
      properties:
        files:
          items:
            $ref: '#/components/schemas/UploadedFileMetadata'
          type: array
          title: Files
        total_count:
          type: integer
          title: Total Count
          description: Total number of files
        limit:
          type: integer
          title: Limit
        offset:
          type: integer
          title: Offset
      type: object
      required:
      - files
      - total_count
      - limit
      - offset
      title: UploadedFilesList
      description: Paginated list of uploaded files.
    UploadedFilesListResponse:
      properties:
        case_id:
          type: string
          title: Case Id
        total_count:
          type: integer
          title: Total Count
        files:
          items:
            $ref: '#/components/schemas/UploadedFileMetadata'
          type: array
          title: Files
      type: object
      required:
      - case_id
      - total_count
      - files
      title: UploadedFilesListResponse
      description: List of uploaded files with evidence counts.
    User:
      properties:
        user_id:
          type: string
          title: User Id
        email:
          type: string
          title: Email
        name:
          type: string
          title: Name
        created_at:
          type: string
          title: Created At
        last_login:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Login
      type: object
      required:
      - user_id
      - email
      - name
      title: User
      description: Represents a user in the system.
    UserInfoResponse:
      properties:
        user_id:
          type: string
          title: User Id
          description: Unique user identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        username:
          type: string
          title: Username
          description: Username
          example: john.doe
        email:
          type: string
          title: Email
          description: Email address
          example: john.doe@faultmaven.local
        display_name:
          type: string
          title: Display Name
          description: Display name
          example: John Doe
        created_at:
          type: string
          title: Created At
          description: Account creation timestamp (ISO format)
          example: '2025-01-15T10:00:00Z'
        is_dev_user:
          type: boolean
          title: Is Dev User
          description: Development user flag
          default: true
        roles:
          items:
            type: string
          type: array
          title: Roles
          description: User roles for access control (e.g., ['user'], ['user', 'admin'])
          default:
          - user
          example:
          - user
          - admin
        last_login:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Login
          description: Last login timestamp (ISO format)
          example: '2025-01-15T14:30:00Z'
        token_count:
          type: integer
          title: Token Count
          description: Number of active tokens for this user
          default: 0
          example: 2
      type: object
      required:
      - user_id
      - username
      - email
      - display_name
      - created_at
      title: UserInfoResponse
      description: 'Extended user information response


        Includes additional metadata for the current user.'
      example:
        created_at: '2025-01-15T10:00:00Z'
        display_name: John Doe
        email: john.doe@faultmaven.local
        is_dev_user: true
        last_login: '2025-01-15T14:30:00Z'
        roles:
        - user
        - admin
        token_count: 2
        user_id: 550e8400-e29b-41d4-a716-446655440000
        username: john.doe
    UserProfile:
      properties:
        user_id:
          type: string
          title: User Id
          description: Unique user identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        username:
          type: string
          title: Username
          description: Username
          example: john.doe
        email:
          type: string
          title: Email
          description: Email address
          example: john.doe@faultmaven.local
        display_name:
          type: string
          title: Display Name
          description: Display name
          example: John Doe
        created_at:
          type: string
          title: Created At
          description: Account creation timestamp (ISO format)
          example: '2025-01-15T10:00:00Z'
        is_dev_user:
          type: boolean
          title: Is Dev User
          description: Development user flag
          default: true
        roles:
          items:
            type: string
          type: array
          title: Roles
          description: User roles for access control (e.g., ['user'], ['user', 'admin'])
          default:
          - user
          example:
          - user
          - admin
      type: object
      required:
      - user_id
      - username
      - email
      - display_name
      - created_at
      title: UserProfile
      description: 'Public user profile information


        Represents user information safe for API responses.

        Excludes sensitive information like hashed passwords.'
      example:
        created_at: '2025-01-15T10:00:00Z'
        display_name: John Doe
        email: john.doe@faultmaven.local
        is_dev_user: true
        roles:
        - user
        - admin
        user_id: 550e8400-e29b-41d4-a716-446655440000
        username: john.doe
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
    VerificationStatus:
      properties:
        verified:
          type: boolean
          title: Verified
          description: Whether solution effectiveness was verified
        verification_method:
          type: string
          maxLength: 500
          title: Verification Method
          description: How verification was done
        details:
          type: string
          maxLength: 1000
          title: Details
          description: Verification details and metrics
      type: object
      required:
      - verified
      - verification_method
      - details
      title: VerificationStatus
      description: Solution verification status for RESOLVED phase.
    ViewState:
      properties:
        session_id:
          type: string
          title: Session Id
        user:
          $ref: '#/components/schemas/User'
        active_case:
          anyOf:
          - $ref: '#/components/schemas/Case'
          - type: 'null'
        cases:
          items:
            $ref: '#/components/schemas/Case'
          type: array
          title: Cases
        messages:
          items:
            type: object
          type: array
          title: Messages
        uploaded_data:
          items:
            $ref: '#/components/schemas/UploadedData'
          type: array
          title: Uploaded Data
        show_case_selector:
          type: boolean
          title: Show Case Selector
          default: true
        show_data_upload:
          type: boolean
          title: Show Data Upload
          default: true
        loading_state:
          anyOf:
          - type: string
          - type: 'null'
          title: Loading State
        memory_context:
          anyOf:
          - type: object
          - type: 'null'
          title: Memory Context
        planning_state:
          anyOf:
          - type: object
          - type: 'null'
          title: Planning State
        investigation_progress:
          anyOf:
          - type: object
          - type: 'null'
          title: Investigation Progress
          description: OODA investigation progress (phase, iteration, hypotheses)
      type: object
      required:
      - session_id
      - user
      title: ViewState
      description: 'Comprehensive view state representing the complete frontend rendering
        state.

        This is the single source of truth for what the frontend should display.'
    WorkingConclusionSummary:
      properties:
        summary:
          type: string
          maxLength: 1000
          title: Summary
          description: Current best theory about the problem
        confidence:
          type: number
          maximum: 1.0
          minimum: 0.0
          title: Confidence
          description: Confidence level (0.0-1.0)
        last_updated:
          type: string
          format: date-time
          title: Last Updated
          description: When this conclusion was last updated
      type: object
      required:
      - summary
      - confidence
      - last_updated
      title: WorkingConclusionSummary
      description: Agent's current understanding during INVESTIGATING phase.
    faultmaven__models__case__CaseStatus:
      type: string
      enum:
      - consulting
      - investigating
      - resolved
      - closed
      title: CaseStatus
      description: "Case lifecycle status.\n\nLifecycle Flow:\n  CONSULTING â†’ INVESTIGATING\
        \ â†’ RESOLVED (terminal)\n                             â†’ CLOSED (terminal)\n\
        \           â†˜ CLOSED (terminal)\n\nTerminal States: RESOLVED, CLOSED (no further\
        \ transitions)"
    faultmaven__models__evidence__CaseStatus:
      type: string
      enum:
      - consulting
      - investigating
      - resolved
      - closed
      title: CaseStatus
      description: 'Case lifecycle status - matches faultmaven.models.case.CaseStatus


        NOTE: This is kept for backwards compatibility with diagnostic state tracking.

        The canonical definition is in faultmaven.models.case.CaseStatus.

        These MUST match exactly to avoid validation errors.'
